<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
        <html lang="zh">
        <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>流式数据聚合过程（traceid 聚合）</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

<h1>流式数据聚合过程（按 traceid）</h1>

<svg width="900" height="600">
    <!-- 数据流入队列 -->
    <text x="50" y="40" font-size="18" fill="black">数据流入队列</text>

    <rect x="50" y="50" width="200" height="50" fill="#4CAF50" stroke="black" stroke-width="2"/>
    <text x="60" y="80" font-size="14" fill="white">TR20230609001, 转账, AAAAA</text>

    <rect x="270" y="50" width="200" height="50" fill="#4CAF50" stroke="black" stroke-width="2"/>
    <text x="280" y="80" font-size="14" fill="white">TR20230609002, 支付, 800</text>

    <rect x="490" y="50" width="200" height="50" fill="#4CAF50" stroke="black" stroke-width="2"/>
    <text x="500" y="80" font-size="14" fill="white">TR20230609003, 存款, 500</text>

    <rect x="50" y="120" width="200" height="50" fill="#4CAF50" stroke="black" stroke-width="2"/>
    <text x="60" y="150" font-size="14" fill="white">TR20230609004, 取款, 600</text>

    <rect x="270" y="120" width="200" height="50" fill="#4CAF50" stroke="black" stroke-width="2"/>
    <text x="280" y="150" font-size="14" fill="white">TR20230609005, 支付, 900</text>

    <rect x="490" y="120" width="200" height="50" fill="#4CAF50" stroke="black" stroke-width="2"/>
    <text x="500" y="150" font-size="14" fill="white">TR10230609005, 高频A, 900</text>

    <rect x="710" y="120" width="200" height="50" fill="#4CAF50" stroke="black" stroke-width="2"/>
    <text x="720" y="150" font-size="14" fill="white">TR10230609005, 高频B, AAAAA</text>

    <!-- 箭头 -->
    <line x1="450" y1="180" x2="450" y2="230" stroke="black" stroke-width="2"/>
    <polygon points="445,230 450,240 455,230" fill="black"/>

    <!-- 数据聚合队列 -->
    <text x="400" y="260" font-size="18" fill="black">按 traceid 进行聚合</text>
    <rect x="350" y="270" width="200" height="50" fill="#FF9800" stroke="black" stroke-width="2"/>
    <text x="370" y="300" font-size="14" fill="white">合并相同 traceid</text>

    <!-- 箭头 -->
    <line x1="450" y1="320" x2="450" y2="370" stroke="black" stroke-width="2"/>
    <polygon points="445,370 450,380 455,370" fill="black"/>

    <!-- 聚合后数据队列 -->
    <text x="370" y="400" font-size="18" fill="black">数据量减少</text>

    <rect x="50" y="410" width="250" height="50" fill="#2196F3" stroke="black" stroke-width="2"/>
    <text x="60" y="440" font-size="14" fill="white">TR20230609001, 转账, AAAAA</text>

    <rect x="320" y="410" width="250" height="50" fill="#2196F3" stroke="black" stroke-width="2"/>
    <text x="330" y="440" font-size="14" fill="white">TR20230609002, 支付, 800</text>

    <rect x="50" y="480" width="250" height="50" fill="#2196F3" stroke="black" stroke-width="2"/>
    <text x="60" y="510" font-size="14" fill="white">TR20230609003, 存款, 500</text>

    <rect x="320" y="480" width="250" height="50" fill="#2196F3" stroke="black" stroke-width="2"/>
    <text x="330" y="510" font-size="14" fill="white">TR20230609004, 取款, 600</text>

    <rect x="590" y="480" width="250" height="50" fill="#2196F3" stroke="black" stroke-width="2"/>
    <text x="600" y="510" font-size="14" fill="white">TR20230609005, 支付, 900</text>

    <rect x="50" y="550" width="250" height="50" fill="#2196F3" stroke="black" stroke-width="2"/>
    <text x="60" y="580" font-size="14" fill="white">TR10230609005, 高频, 1900</text>

    <!-- 箭头 -->
    <line x1="450" y1="540" x2="450" y2="590" stroke="black" stroke-width="2"/>
    <polygon points="445,590 450,600 455,590" fill="black"/>

    <!-- 最终存储 -->
    <text x="390" y="620" font-size="18" fill="black">存储 & 输出</text>
    <rect x="350" y="630" width="200" height="50" fill="#F44336" stroke="black" stroke-width="2"/>
    <text x="370" y="660" font-size="14" fill="white">存储到数据库</text>

</svg>

</body>
</html></title>
</head>
<body>

</body>
</html>